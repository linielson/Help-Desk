<!DOCTYPE html>

<html>
<head>
<meta content="text/html; charset=utf-8" http-equiv="Content-Type">

<title>class RelatoriosController - Rails Application Documentation</title>

<link type="text/css" media="screen" href="./rdoc.css" rel="stylesheet">

<script type="text/javascript">
  var rdoc_rel_prefix = "./";
</script>

<script type="text/javascript" charset="utf-8" src="./js/jquery.js"></script>
<script type="text/javascript" charset="utf-8" src="./js/navigation.js"></script>
<script type="text/javascript" charset="utf-8" src="./js/search_index.js"></script>
<script type="text/javascript" charset="utf-8" src="./js/search.js"></script>
<script type="text/javascript" charset="utf-8" src="./js/searcher.js"></script>
<script type="text/javascript" charset="utf-8" src="./js/darkfish.js"></script>


<body id="top" class="class">
<nav id="metadata">
  <nav id="home-section" class="section">
  <h3 class="section-header">
    <a href="./index.html">Home</a>
    <a href="./table_of_contents.html#classes">Classes</a>
    <a href="./table_of_contents.html#methods">Methods</a>
  </h3>
</nav>


  <nav id="search-section" class="section project-section" class="initially-hidden">
  <form action="#" method="get" accept-charset="utf-8">
    <h3 class="section-header">
      <input type="text" name="search" placeholder="Search" id="search-field"
             title="Type to search, Up and Down to navigate, Enter to load">
    </h3>
  </form>

  <ul id="search-results" class="initially-hidden"></ul>
</nav>


  <div id="file-metadata">
    <nav id="file-list-section" class="section">
  <h3 class="section-header">Defined In</h3>
  <ul>
    <li>app/controllers/relatorios_controller.rb
  </ul>
</nav>

    
  </div>

  <div id="class-metadata">
    
    <nav id="parent-class-section" class="section">
  <h3 class="section-header">Parent</h3>
  
  <p class="link"><a href="ApplicationController.html">ApplicationController</a>
  
</nav>

    
    <!-- Method Quickref -->
<nav id="method-list-section" class="section">
  <h3 class="section-header">Methods</h3>

  <ul class="link-list">
    
    <li><a href="#method-i-carregar_recursos">#carregar_recursos</a>
    
    <li><a href="#method-i-executar_01">#executar_01</a>
    
    <li><a href="#method-i-executar_02">#executar_02</a>
    
    <li><a href="#method-i-executar_03">#executar_03</a>
    
    <li><a href="#method-i-executar_04">#executar_04</a>
    
    <li><a href="#method-i-executar_05">#executar_05</a>
    
    <li><a href="#method-i-executar_06">#executar_06</a>
    
    <li><a href="#method-i-filtrar_pelo_cliente">#filtrar_pelo_cliente</a>
    
    <li><a href="#method-i-filtrar_pelo_date">#filtrar_pelo_date</a>
    
    <li><a href="#method-i-filtrar_pelo_servico">#filtrar_pelo_servico</a>
    
    <li><a href="#method-i-filtrar_pelo_tecnico">#filtrar_pelo_tecnico</a>
    
    <li><a href="#method-i-gerar">#gerar</a>
    
    <li><a href="#method-i-maior_valor">#maior_valor</a>
    
    <li><a href="#method-i-nome_do_cliente">#nome_do_cliente</a>
    
    <li><a href="#method-i-nome_do_servico">#nome_do_servico</a>
    
    <li><a href="#method-i-nome_do_tecnico">#nome_do_tecnico</a>
    
    <li><a href="#method-i-numero_de_etapas_num_periodo_por_tecnico">#numero_de_etapas_num_periodo_por_tecnico</a>
    
    <li><a href="#method-i-numero_de_tarefas_num_periodo_por_cliente">#numero_de_tarefas_num_periodo_por_cliente</a>
    
    <li><a href="#method-i-numero_de_tarefas_num_periodo_por_servico">#numero_de_tarefas_num_periodo_por_servico</a>
    
    <li><a href="#method-i-relatorio_grafico_bar">#relatorio_grafico_bar</a>
    
    <li><a href="#method-i-relatorio_grafico_pie">#relatorio_grafico_pie</a>
    
    <li><a href="#method-i-remover_acentos">#remover_acentos</a>
    
    <li><a href="#method-i-todos_os_tecnicos">#todos_os_tecnicos</a>
    
  </ul>
</nav>

  </div>

  <div id="project-metadata">
    <nav id="fileindex-section" class="section project-section">
  <h3 class="section-header">Pages</h3>

  <ul>
  
    <li class="file"><a href="./doc/README_FOR_APP.html">README_FOR_APP</a>
  
  </ul>
</nav>

    <nav id="classindex-section" class="section project-section">
  <h3 class="section-header">Class and Module Index</h3>

  <ul class="link-list">
  
    <li><a href="./ApplicationController.html">ApplicationController</a>
  
    <li><a href="./ApplicationHelper.html">ApplicationHelper</a>
  
    <li><a href="./NotificacaoMailer.html">NotificacaoMailer</a>
  
    <li><a href="./PagesController.html">PagesController</a>
  
    <li><a href="./PagesHelper.html">PagesHelper</a>
  
    <li><a href="./Pessoa.html">Pessoa</a>
  
    <li><a href="./PessoasController.html">PessoasController</a>
  
    <li><a href="./PessoasHelper.html">PessoasHelper</a>
  
    <li><a href="./Projeto.html">Projeto</a>
  
    <li><a href="./ProjetosController.html">ProjetosController</a>
  
    <li><a href="./ProjetosHelper.html">ProjetosHelper</a>
  
    <li><a href="./Recurso.html">Recurso</a>
  
    <li><a href="./RecursosController.html">RecursosController</a>
  
    <li><a href="./RecursosHelper.html">RecursosHelper</a>
  
    <li><a href="./RelatoriosController.html">RelatoriosController</a>
  
    <li><a href="./Servico.html">Servico</a>
  
    <li><a href="./ServicoEtapa.html">ServicoEtapa</a>
  
    <li><a href="./ServicoEtapasController.html">ServicoEtapasController</a>
  
    <li><a href="./ServicoEtapasHelper.html">ServicoEtapasHelper</a>
  
    <li><a href="./ServicosController.html">ServicosController</a>
  
    <li><a href="./ServicosHelper.html">ServicosHelper</a>
  
    <li><a href="./Tarefa.html">Tarefa</a>
  
    <li><a href="./TarefaAnexo.html">TarefaAnexo</a>
  
    <li><a href="./TarefaAnexosController.html">TarefaAnexosController</a>
  
    <li><a href="./TarefaAnexosHelper.html">TarefaAnexosHelper</a>
  
    <li><a href="./TarefaEtapa.html">TarefaEtapa</a>
  
    <li><a href="./TarefaEtapasController.html">TarefaEtapasController</a>
  
    <li><a href="./TarefaEtapasHelper.html">TarefaEtapasHelper</a>
  
    <li><a href="./TarefaHora.html">TarefaHora</a>
  
    <li><a href="./TarefaHorasController.html">TarefaHorasController</a>
  
    <li><a href="./TarefaHorasHelper.html">TarefaHorasHelper</a>
  
    <li><a href="./TarefasController.html">TarefasController</a>
  
    <li><a href="./TarefasHelper.html">TarefasHelper</a>
  
    <li><a href="./Usuario.html">Usuario</a>
  
    <li><a href="./UsuariosController.html">UsuariosController</a>
  
    <li><a href="./UsuariosHelper.html">UsuariosHelper</a>
  
    <li><a href="./Workflow.html">Workflow</a>
  
    <li><a href="./WorkflowsController.html">WorkflowsController</a>
  
  </ul>
</nav>

  </div>
</nav>

<div id="documentation">
  <h1 class="class">class RelatoriosController</h1>

  <div id="description" class="description">
    
  </div><!-- description -->

  
  
  
  <section id="5Buntitled-5D" class="documentation-section">
    

    

    

    

    <!-- Methods -->
    
     <section id="public-instance-5Buntitled-5D-method-details" class="method-section section">
      <h3 class="section-header">Public Instance Methods</h3>

    
      <div id="method-i-executar_01" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">executar_01</span><span
            class="method-args">()</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          
          

          
          <div class="method-source-code" id="executar_01-source">
            <pre><span class="ruby-comment"># File app/controllers/relatorios_controller.rb, line 22</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">executar_01</span>
  <span class="ruby-ivar">@servico_nome</span> = <span class="ruby-identifier">nome_do_servico</span> <span class="ruby-identifier">params</span>[<span class="ruby-value">:servico</span>]
  <span class="ruby-ivar">@cliente_nome</span> = <span class="ruby-identifier">nome_do_cliente</span> <span class="ruby-identifier">params</span>[<span class="ruby-value">:cliente</span>]
  <span class="ruby-ivar">@tecnico_nome</span> = <span class="ruby-identifier">nome_do_tecnico</span> <span class="ruby-identifier">params</span>[<span class="ruby-value">:tecnico</span>]
  <span class="ruby-ivar">@data_inicio</span> = <span class="ruby-identifier">filtrar_pelo_date</span> <span class="ruby-value">:inicio</span>
  <span class="ruby-ivar">@data_fim</span> = <span class="ruby-ivar">@data_inicio</span> <span class="ruby-operator">+</span> <span class="ruby-value">1</span>.<span class="ruby-identifier">month</span>

  <span class="ruby-identifier">where_servico</span> = <span class="ruby-identifier">filtrar_pelo_servico</span> <span class="ruby-identifier">params</span>[<span class="ruby-value">:servico</span>]
  <span class="ruby-identifier">where_cliente</span> = <span class="ruby-identifier">filtrar_pelo_cliente</span> <span class="ruby-identifier">params</span>[<span class="ruby-value">:cliente</span>]
  <span class="ruby-identifier">where_tecnico</span> = <span class="ruby-identifier">params</span>[<span class="ruby-value">:tecnico</span>] <span class="ruby-operator">==</span> <span class="ruby-string">&quot;&quot;</span> <span class="ruby-operator">?</span> <span class="ruby-string">&quot;tipo = 'T'&quot;</span> <span class="ruby-operator">:</span> <span class="ruby-node">&quot;id = #{params[:tecnico]}&quot;</span>

  <span class="ruby-identifier">tecnicos</span> = <span class="ruby-constant">Usuario</span>.<span class="ruby-identifier">all</span>(<span class="ruby-identifier">conditions</span><span class="ruby-operator">:</span> [<span class="ruby-node">&quot;#{where_tecnico}&quot;</span>])

  <span class="ruby-ivar">@atendimentos</span> = []
  <span class="ruby-identifier">dados</span> = []
  <span class="ruby-identifier">legenda</span> = []
  <span class="ruby-identifier">valor_maximo</span> = <span class="ruby-value">0</span>
  
  <span class="ruby-identifier">tecnicos</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">tecnico</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">nome_do_tecnico</span> = <span class="ruby-node">&quot;#{tecnico.id}-#{Usuario.find(tecnico.id).nome_completo}&quot;</span>

    <span class="ruby-identifier">no_periodo</span>   = <span class="ruby-identifier">numero_de_etapas_num_periodo_por_tecnico</span>(<span class="ruby-identifier">tecnico</span>.<span class="ruby-identifier">id</span>, <span class="ruby-identifier">where_cliente</span>, <span class="ruby-identifier">where_servico</span>, <span class="ruby-ivar">@data_inicio</span>, <span class="ruby-ivar">@data_fim</span>)
    <span class="ruby-identifier">mes_anterior</span> = <span class="ruby-identifier">numero_de_etapas_num_periodo_por_tecnico</span>(<span class="ruby-identifier">tecnico</span>.<span class="ruby-identifier">id</span>, <span class="ruby-identifier">where_cliente</span>, <span class="ruby-identifier">where_servico</span>, <span class="ruby-ivar">@data_inicio</span><span class="ruby-operator">-</span><span class="ruby-value">1</span>.<span class="ruby-identifier">month</span>, <span class="ruby-ivar">@data_fim</span><span class="ruby-operator">-</span><span class="ruby-value">1</span>.<span class="ruby-identifier">month</span><span class="ruby-operator">-</span><span class="ruby-value">1</span>.<span class="ruby-identifier">day</span>)
    <span class="ruby-identifier">ano_anterior</span> = <span class="ruby-identifier">numero_de_etapas_num_periodo_por_tecnico</span>(<span class="ruby-identifier">tecnico</span>.<span class="ruby-identifier">id</span>, <span class="ruby-identifier">where_cliente</span>, <span class="ruby-identifier">where_servico</span>, <span class="ruby-ivar">@data_inicio</span><span class="ruby-operator">-</span><span class="ruby-value">1</span>.<span class="ruby-identifier">year</span>, <span class="ruby-ivar">@data_fim</span><span class="ruby-operator">-</span><span class="ruby-value">1</span>.<span class="ruby-identifier">year</span>)

    <span class="ruby-keyword">if</span> <span class="ruby-identifier">no_periodo</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span> <span class="ruby-keyword">or</span> <span class="ruby-identifier">mes_anterior</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span> <span class="ruby-keyword">or</span> <span class="ruby-identifier">ano_anterior</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span>
      <span class="ruby-identifier">legenda</span> <span class="ruby-operator">+=</span> [<span class="ruby-identifier">remover_acentos</span>(<span class="ruby-identifier">nome_do_tecnico</span>)]

      <span class="ruby-identifier">dados</span> <span class="ruby-operator">&lt;&lt;</span> [<span class="ruby-identifier">no_periodo</span>, <span class="ruby-identifier">mes_anterior</span>, <span class="ruby-identifier">ano_anterior</span>]

      <span class="ruby-ivar">@atendimentos</span> <span class="ruby-operator">&lt;&lt;</span> [<span class="ruby-identifier">nome_do_tecnico</span>, <span class="ruby-identifier">no_periodo</span>, <span class="ruby-identifier">mes_anterior</span>, <span class="ruby-identifier">ano_anterior</span>]

      <span class="ruby-identifier">valor_maximo</span> = <span class="ruby-identifier">maior_valor</span>(<span class="ruby-identifier">valor_maximo</span>, <span class="ruby-identifier">no_periodo</span>, <span class="ruby-identifier">mes_anterior</span>, <span class="ruby-identifier">ano_anterior</span>)
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-ivar">@grafico</span> = <span class="ruby-identifier">relatorio_grafico_bar</span> <span class="ruby-identifier">dados</span>, <span class="ruby-identifier">legenda</span>, <span class="ruby-identifier">valor_maximo</span>
  
  <span class="ruby-identifier">render</span> <span class="ruby-identifier">action</span><span class="ruby-operator">:</span> <span class="ruby-string">&quot;saida_01&quot;</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- executar_01-source -->
          
        </div>

        

        
      </div><!-- executar_01-method -->

    
      <div id="method-i-executar_02" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">executar_02</span><span
            class="method-args">()</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          
          

          
          <div class="method-source-code" id="executar_02-source">
            <pre><span class="ruby-comment"># File app/controllers/relatorios_controller.rb, line 63</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">executar_02</span>
  <span class="ruby-ivar">@servico_nome</span> = <span class="ruby-identifier">nome_do_servico</span> <span class="ruby-identifier">params</span>[<span class="ruby-value">:servico</span>]
  <span class="ruby-ivar">@cliente_nome</span> = <span class="ruby-identifier">nome_do_cliente</span> <span class="ruby-identifier">params</span>[<span class="ruby-value">:cliente</span>]
  <span class="ruby-ivar">@tecnico_nome</span> = <span class="ruby-identifier">nome_do_tecnico</span> <span class="ruby-identifier">params</span>[<span class="ruby-value">:tecnico</span>]
  <span class="ruby-ivar">@data_inicio</span> = <span class="ruby-identifier">filtrar_pelo_date</span> <span class="ruby-value">:inicio</span>
  <span class="ruby-ivar">@data_fim</span> = <span class="ruby-ivar">@data_inicio</span> <span class="ruby-operator">+</span> <span class="ruby-value">1</span>.<span class="ruby-identifier">month</span>

  <span class="ruby-identifier">where_cliente</span> = <span class="ruby-identifier">filtrar_pelo_cliente</span> <span class="ruby-identifier">params</span>[<span class="ruby-value">:cliente</span>]
  <span class="ruby-identifier">where_tecnico</span> = <span class="ruby-identifier">filtrar_pelo_tecnico</span> <span class="ruby-identifier">params</span>[<span class="ruby-value">:tecnico</span>]
  <span class="ruby-identifier">where_servico</span> = <span class="ruby-identifier">params</span>[<span class="ruby-value">:servico</span>] <span class="ruby-operator">==</span> <span class="ruby-string">&quot;&quot;</span> <span class="ruby-operator">?</span> <span class="ruby-string">&quot;&quot;</span> <span class="ruby-operator">:</span> <span class="ruby-node">&quot;id = #{params[:servico]}&quot;</span>

  <span class="ruby-identifier">servicos</span> = <span class="ruby-constant">Servico</span>.<span class="ruby-identifier">all</span>(<span class="ruby-identifier">conditions</span><span class="ruby-operator">:</span> [<span class="ruby-node">&quot;#{where_servico}&quot;</span>])

  <span class="ruby-ivar">@tarefas</span> = []
  <span class="ruby-identifier">dados_no_periodo</span> = []
  <span class="ruby-identifier">legenda_no_periodo</span> = []
  <span class="ruby-identifier">dados_mes_anterior</span> = []
  <span class="ruby-identifier">legenda_mes_anterior</span> = []
  <span class="ruby-identifier">dados_ano_anterior</span> = []
  <span class="ruby-identifier">legenda_ano_anterior</span> = []
 
  <span class="ruby-identifier">servicos</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">servico</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">nome_do_servico</span> = <span class="ruby-node">&quot;#{servico.id}-#{Servico.find(servico.id).nome}&quot;</span>

    <span class="ruby-identifier">no_periodo</span>   = <span class="ruby-identifier">numero_de_tarefas_num_periodo_por_servico</span>(<span class="ruby-identifier">servico</span>.<span class="ruby-identifier">id</span>, <span class="ruby-identifier">where_cliente</span>, <span class="ruby-identifier">where_tecnico</span>, <span class="ruby-ivar">@data_inicio</span>, <span class="ruby-ivar">@data_fim</span>)
    <span class="ruby-identifier">mes_anterior</span> = <span class="ruby-identifier">numero_de_tarefas_num_periodo_por_servico</span>(<span class="ruby-identifier">servico</span>.<span class="ruby-identifier">id</span>, <span class="ruby-identifier">where_cliente</span>, <span class="ruby-identifier">where_tecnico</span>, <span class="ruby-ivar">@data_inicio</span><span class="ruby-operator">-</span><span class="ruby-value">1</span>.<span class="ruby-identifier">month</span>, <span class="ruby-ivar">@data_fim</span><span class="ruby-operator">-</span><span class="ruby-value">1</span>.<span class="ruby-identifier">month</span><span class="ruby-operator">-</span><span class="ruby-value">1</span>.<span class="ruby-identifier">day</span>)
    <span class="ruby-identifier">ano_anterior</span> = <span class="ruby-identifier">numero_de_tarefas_num_periodo_por_servico</span>(<span class="ruby-identifier">servico</span>.<span class="ruby-identifier">id</span>, <span class="ruby-identifier">where_cliente</span>, <span class="ruby-identifier">where_tecnico</span>, <span class="ruby-ivar">@data_inicio</span><span class="ruby-operator">-</span><span class="ruby-value">1</span>.<span class="ruby-identifier">year</span>, <span class="ruby-ivar">@data_fim</span><span class="ruby-operator">-</span><span class="ruby-value">1</span>.<span class="ruby-identifier">year</span>)

    <span class="ruby-identifier">possui_tarefa</span> = <span class="ruby-keyword">false</span>
    
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">no_periodo</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span>
      <span class="ruby-identifier">legenda_no_periodo</span> <span class="ruby-operator">+=</span> [<span class="ruby-identifier">remover_acentos</span>(<span class="ruby-identifier">nome_do_servico</span>)]
      <span class="ruby-identifier">dados_no_periodo</span> <span class="ruby-operator">+=</span> [<span class="ruby-identifier">no_periodo</span>]
      <span class="ruby-identifier">possui_tarefa</span> = <span class="ruby-keyword">true</span>
    <span class="ruby-keyword">end</span>
    
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">mes_anterior</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span>
      <span class="ruby-identifier">legenda_mes_anterior</span> <span class="ruby-operator">+=</span> [<span class="ruby-identifier">remover_acentos</span>(<span class="ruby-identifier">nome_do_servico</span>)]
      <span class="ruby-identifier">dados_mes_anterior</span> <span class="ruby-operator">+=</span> [<span class="ruby-identifier">mes_anterior</span>]
      <span class="ruby-identifier">possui_tarefa</span> = <span class="ruby-keyword">true</span>
    <span class="ruby-keyword">end</span>

    <span class="ruby-keyword">if</span> <span class="ruby-identifier">ano_anterior</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span>
      <span class="ruby-identifier">legenda_ano_anterior</span> <span class="ruby-operator">+=</span> [<span class="ruby-identifier">remover_acentos</span>(<span class="ruby-identifier">nome_do_servico</span>)]
      <span class="ruby-identifier">dados_ano_anterior</span> <span class="ruby-operator">+=</span> [<span class="ruby-identifier">ano_anterior</span>]
      <span class="ruby-identifier">possui_tarefa</span> = <span class="ruby-keyword">true</span>
    <span class="ruby-keyword">end</span>

    <span class="ruby-ivar">@tarefas</span> <span class="ruby-operator">&lt;&lt;</span> [<span class="ruby-identifier">nome_do_servico</span>, <span class="ruby-identifier">no_periodo</span>, <span class="ruby-identifier">mes_anterior</span>, <span class="ruby-identifier">ano_anterior</span>] <span class="ruby-keyword">if</span> <span class="ruby-identifier">possui_tarefa</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-ivar">@graf_no_periodo</span> = <span class="ruby-identifier">relatorio_grafico_pie</span> <span class="ruby-identifier">dados_no_periodo</span>, <span class="ruby-identifier">legenda_no_periodo</span>, <span class="ruby-string">'No período'</span>
  <span class="ruby-ivar">@graf_ha_um_mes</span> = <span class="ruby-identifier">relatorio_grafico_pie</span> <span class="ruby-identifier">dados_mes_anterior</span>, <span class="ruby-identifier">legenda_mes_anterior</span>, <span class="ruby-string">'Há um mês'</span>
  <span class="ruby-ivar">@graf_ha_um_ano</span> = <span class="ruby-identifier">relatorio_grafico_pie</span> <span class="ruby-identifier">dados_ano_anterior</span>, <span class="ruby-identifier">legenda_ano_anterior</span>, <span class="ruby-string">'Há um ano'</span>

  <span class="ruby-identifier">render</span> <span class="ruby-identifier">action</span><span class="ruby-operator">:</span> <span class="ruby-string">&quot;saida_02&quot;</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- executar_02-source -->
          
        </div>

        

        
      </div><!-- executar_02-method -->

    
      <div id="method-i-executar_03" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">executar_03</span><span
            class="method-args">()</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          
          

          
          <div class="method-source-code" id="executar_03-source">
            <pre><span class="ruby-comment"># File app/controllers/relatorios_controller.rb, line 121</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">executar_03</span>
  <span class="ruby-ivar">@servico_nome</span> = <span class="ruby-identifier">nome_do_servico</span> <span class="ruby-identifier">params</span>[<span class="ruby-value">:servico</span>]
  <span class="ruby-ivar">@cliente_nome</span> = <span class="ruby-identifier">nome_do_cliente</span> <span class="ruby-identifier">params</span>[<span class="ruby-value">:cliente</span>]
  <span class="ruby-ivar">@tecnico_nome</span> = <span class="ruby-identifier">nome_do_tecnico</span> <span class="ruby-identifier">params</span>[<span class="ruby-value">:tecnico</span>]
  <span class="ruby-ivar">@data_inicio</span> = <span class="ruby-identifier">filtrar_pelo_date</span> <span class="ruby-value">:inicio</span>
  <span class="ruby-ivar">@data_fim</span> = <span class="ruby-ivar">@data_inicio</span> <span class="ruby-operator">+</span> <span class="ruby-value">1</span>.<span class="ruby-identifier">month</span>

  <span class="ruby-identifier">where_servico</span> = <span class="ruby-identifier">filtrar_pelo_servico</span> <span class="ruby-identifier">params</span>[<span class="ruby-value">:servico</span>]
  <span class="ruby-identifier">where_tecnico</span> = <span class="ruby-identifier">filtrar_pelo_tecnico</span> <span class="ruby-identifier">params</span>[<span class="ruby-value">:tecnico</span>]
  <span class="ruby-identifier">where_cliente</span> = <span class="ruby-identifier">params</span>[<span class="ruby-value">:cliente</span>] <span class="ruby-operator">==</span> <span class="ruby-string">&quot;&quot;</span> <span class="ruby-operator">?</span> <span class="ruby-string">&quot;&quot;</span> <span class="ruby-operator">:</span> <span class="ruby-node">&quot;id = #{params[:cliente]}&quot;</span>

  <span class="ruby-identifier">clientes</span> = <span class="ruby-constant">Pessoa</span>.<span class="ruby-identifier">all</span>(<span class="ruby-identifier">conditions</span><span class="ruby-operator">:</span> [<span class="ruby-node">&quot;#{where_cliente}&quot;</span>])

  <span class="ruby-ivar">@tarefas</span> = []
  <span class="ruby-identifier">dados_no_periodo</span> = []
  <span class="ruby-identifier">legenda_no_periodo</span> = []
  <span class="ruby-identifier">dados_mes_anterior</span> = []
  <span class="ruby-identifier">legenda_mes_anterior</span> = []
  <span class="ruby-identifier">dados_ano_anterior</span> = []
  <span class="ruby-identifier">legenda_ano_anterior</span> = []

  <span class="ruby-identifier">clientes</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">cliente</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">nome_do_cliente</span> = <span class="ruby-node">&quot;#{cliente.id}-#{Pessoa.find(cliente.id).nome}&quot;</span>
    
    <span class="ruby-identifier">no_periodo</span>   = <span class="ruby-identifier">numero_de_tarefas_num_periodo_por_cliente</span>(<span class="ruby-identifier">cliente</span>.<span class="ruby-identifier">id</span>, <span class="ruby-identifier">where_tecnico</span>, <span class="ruby-identifier">where_servico</span>, <span class="ruby-ivar">@data_inicio</span>, <span class="ruby-ivar">@data_fim</span>)
    <span class="ruby-identifier">mes_anterior</span> = <span class="ruby-identifier">numero_de_tarefas_num_periodo_por_cliente</span>(<span class="ruby-identifier">cliente</span>.<span class="ruby-identifier">id</span>, <span class="ruby-identifier">where_tecnico</span>, <span class="ruby-identifier">where_servico</span>, <span class="ruby-ivar">@data_inicio</span><span class="ruby-operator">-</span><span class="ruby-value">1</span>.<span class="ruby-identifier">month</span>, <span class="ruby-ivar">@data_fim</span><span class="ruby-operator">-</span><span class="ruby-value">1</span>.<span class="ruby-identifier">month</span><span class="ruby-operator">-</span><span class="ruby-value">1</span>.<span class="ruby-identifier">day</span>)
    <span class="ruby-identifier">ano_anterior</span> = <span class="ruby-identifier">numero_de_tarefas_num_periodo_por_cliente</span>(<span class="ruby-identifier">cliente</span>.<span class="ruby-identifier">id</span>, <span class="ruby-identifier">where_tecnico</span>, <span class="ruby-identifier">where_servico</span>, <span class="ruby-ivar">@data_inicio</span><span class="ruby-operator">-</span><span class="ruby-value">1</span>.<span class="ruby-identifier">year</span>, <span class="ruby-ivar">@data_fim</span><span class="ruby-operator">-</span><span class="ruby-value">1</span>.<span class="ruby-identifier">year</span>)

    <span class="ruby-identifier">possui_tarefa</span> = <span class="ruby-keyword">false</span>

    <span class="ruby-keyword">if</span> <span class="ruby-identifier">no_periodo</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span>
      <span class="ruby-identifier">legenda_no_periodo</span> <span class="ruby-operator">+=</span> [<span class="ruby-identifier">remover_acentos</span>(<span class="ruby-identifier">nome_do_cliente</span>)]
      <span class="ruby-identifier">dados_no_periodo</span> <span class="ruby-operator">+=</span> [<span class="ruby-identifier">no_periodo</span>]
      <span class="ruby-identifier">possui_tarefa</span> = <span class="ruby-keyword">true</span>
    <span class="ruby-keyword">end</span>

    <span class="ruby-keyword">if</span> <span class="ruby-identifier">mes_anterior</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span>
      <span class="ruby-identifier">legenda_mes_anterior</span> <span class="ruby-operator">+=</span> [<span class="ruby-identifier">remover_acentos</span>(<span class="ruby-identifier">nome_do_cliente</span>)]
      <span class="ruby-identifier">dados_mes_anterior</span> <span class="ruby-operator">+=</span> [<span class="ruby-identifier">mes_anterior</span>]
      <span class="ruby-identifier">possui_tarefa</span> = <span class="ruby-keyword">true</span>
    <span class="ruby-keyword">end</span>

    <span class="ruby-keyword">if</span> <span class="ruby-identifier">ano_anterior</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span>
      <span class="ruby-identifier">legenda_ano_anterior</span> <span class="ruby-operator">+=</span> [<span class="ruby-identifier">remover_acentos</span>(<span class="ruby-identifier">nome_do_cliente</span>)]
      <span class="ruby-identifier">dados_ano_anterior</span> <span class="ruby-operator">+=</span> [<span class="ruby-identifier">ano_anterior</span>]
      <span class="ruby-identifier">possui_tarefa</span> = <span class="ruby-keyword">true</span>
    <span class="ruby-keyword">end</span>

    <span class="ruby-ivar">@tarefas</span> <span class="ruby-operator">&lt;&lt;</span> [<span class="ruby-identifier">nome_do_cliente</span>, <span class="ruby-identifier">no_periodo</span>, <span class="ruby-identifier">mes_anterior</span>, <span class="ruby-identifier">ano_anterior</span>] <span class="ruby-keyword">if</span> <span class="ruby-identifier">possui_tarefa</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-ivar">@graf_no_periodo</span> = <span class="ruby-identifier">relatorio_grafico_pie</span> <span class="ruby-identifier">dados_no_periodo</span>, <span class="ruby-identifier">legenda_no_periodo</span>, <span class="ruby-string">'No período'</span>
  <span class="ruby-ivar">@graf_ha_um_mes</span> = <span class="ruby-identifier">relatorio_grafico_pie</span> <span class="ruby-identifier">dados_mes_anterior</span>, <span class="ruby-identifier">legenda_mes_anterior</span>, <span class="ruby-string">'Há um mês'</span>
  <span class="ruby-ivar">@graf_ha_um_ano</span> = <span class="ruby-identifier">relatorio_grafico_pie</span> <span class="ruby-identifier">dados_ano_anterior</span>, <span class="ruby-identifier">legenda_ano_anterior</span>, <span class="ruby-string">'Há um ano'</span>

  <span class="ruby-identifier">render</span> <span class="ruby-identifier">action</span><span class="ruby-operator">:</span> <span class="ruby-string">&quot;saida_03&quot;</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- executar_03-source -->
          
        </div>

        

        
      </div><!-- executar_03-method -->

    
      <div id="method-i-executar_04" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">executar_04</span><span
            class="method-args">()</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          
          

          
          <div class="method-source-code" id="executar_04-source">
            <pre><span class="ruby-comment"># File app/controllers/relatorios_controller.rb, line 179</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">executar_04</span>
  <span class="ruby-ivar">@servico_nome</span> = <span class="ruby-identifier">nome_do_servico</span> <span class="ruby-identifier">params</span>[<span class="ruby-value">:servico</span>]
  <span class="ruby-ivar">@cliente_nome</span> = <span class="ruby-identifier">nome_do_cliente</span> <span class="ruby-identifier">params</span>[<span class="ruby-value">:cliente</span>]
  <span class="ruby-ivar">@tecnico_nome</span> = <span class="ruby-identifier">nome_do_tecnico</span> <span class="ruby-identifier">params</span>[<span class="ruby-value">:tecnico</span>]
  <span class="ruby-ivar">@data_inicio</span> = <span class="ruby-identifier">filtrar_pelo_date</span> <span class="ruby-value">:inicio</span>
  <span class="ruby-ivar">@data_fim</span> = <span class="ruby-identifier">filtrar_pelo_date</span> <span class="ruby-value">:fim</span>

  <span class="ruby-identifier">where_servico</span> = <span class="ruby-identifier">filtrar_pelo_servico</span> <span class="ruby-identifier">params</span>[<span class="ruby-value">:servico</span>]
  <span class="ruby-identifier">where_cliente</span> = <span class="ruby-identifier">filtrar_pelo_cliente</span> <span class="ruby-identifier">params</span>[<span class="ruby-value">:cliente</span>]
  <span class="ruby-identifier">where_tecnico</span> = <span class="ruby-identifier">params</span>[<span class="ruby-value">:tecnico</span>] <span class="ruby-operator">==</span> <span class="ruby-string">&quot;&quot;</span> <span class="ruby-operator">?</span> <span class="ruby-node">&quot;AND tecnico_id IN (#{todos_os_tecnicos})&quot;</span> <span class="ruby-operator">:</span> <span class="ruby-node">&quot;AND tecnico_id = #{params[:tecnico]}&quot;</span>

  <span class="ruby-identifier">tarefas</span> = <span class="ruby-constant">Tarefa</span>.<span class="ruby-identifier">all</span>(
    <span class="ruby-identifier">conditions</span><span class="ruby-operator">:</span> [<span class="ruby-node">&quot;emissao between ? and ? #{where_servico} #{where_cliente}&quot;</span>,
      <span class="ruby-ivar">@data_inicio</span>, <span class="ruby-ivar">@data_fim</span>]
  )

  <span class="ruby-ivar">@etapas</span> = <span class="ruby-constant">TarefaEtapa</span>.<span class="ruby-identifier">all</span>(
    <span class="ruby-identifier">select</span><span class="ruby-operator">:</span> <span class="ruby-string">&quot;codigo, tarefa_id, tecnico_id&quot;</span>,
    <span class="ruby-identifier">conditions</span><span class="ruby-operator">:</span> [<span class="ruby-node">&quot;tarefa_id IN (?) #{where_tecnico} AND status &lt;&gt; 'C'&quot;</span>, <span class="ruby-identifier">tarefas</span>],
    <span class="ruby-identifier">order</span><span class="ruby-operator">:</span> <span class="ruby-string">&quot;tecnico_id, tarefa_id, codigo&quot;</span>
  )
  <span class="ruby-identifier">render</span> <span class="ruby-identifier">action</span><span class="ruby-operator">:</span> <span class="ruby-string">&quot;saida_04&quot;</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- executar_04-source -->
          
        </div>

        

        
      </div><!-- executar_04-method -->

    
      <div id="method-i-executar_05" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">executar_05</span><span
            class="method-args">()</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          
          

          
          <div class="method-source-code" id="executar_05-source">
            <pre><span class="ruby-comment"># File app/controllers/relatorios_controller.rb, line 203</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">executar_05</span>
  <span class="ruby-ivar">@servico_nome</span> = <span class="ruby-identifier">nome_do_servico</span> <span class="ruby-identifier">params</span>[<span class="ruby-value">:servico</span>]
  <span class="ruby-ivar">@cliente_nome</span> = <span class="ruby-identifier">nome_do_cliente</span> <span class="ruby-identifier">params</span>[<span class="ruby-value">:cliente</span>]
  <span class="ruby-ivar">@tecnico_nome</span> = <span class="ruby-identifier">nome_do_tecnico</span> <span class="ruby-identifier">params</span>[<span class="ruby-value">:tecnico</span>]

  <span class="ruby-identifier">where_servico</span> = <span class="ruby-identifier">filtrar_pelo_servico</span> <span class="ruby-identifier">params</span>[<span class="ruby-value">:servico</span>]
  <span class="ruby-identifier">where_cliente</span> = <span class="ruby-identifier">filtrar_pelo_cliente</span> <span class="ruby-identifier">params</span>[<span class="ruby-value">:cliente</span>]
  <span class="ruby-identifier">where_tecnico</span> = <span class="ruby-identifier">filtrar_pelo_tecnico</span> <span class="ruby-identifier">params</span>[<span class="ruby-value">:tecnico</span>]
  <span class="ruby-identifier">where_status</span> = <span class="ruby-string">&quot;AND status &lt;&gt; 'C'&quot;</span>

  <span class="ruby-identifier">tarefas</span> = <span class="ruby-constant">Tarefa</span>.<span class="ruby-identifier">all</span>(
    <span class="ruby-identifier">conditions</span><span class="ruby-operator">:</span> [<span class="ruby-node">&quot;entrega &lt; ? #{where_status} #{where_servico} #{where_cliente}&quot;</span>,
      <span class="ruby-constant">DateTime</span>.<span class="ruby-identifier">now</span>]
  )

  <span class="ruby-ivar">@etapas</span> = <span class="ruby-constant">TarefaEtapa</span>.<span class="ruby-identifier">all</span>(
    <span class="ruby-identifier">conditions</span><span class="ruby-operator">:</span> [<span class="ruby-node">&quot;tarefa_id IN (?) #{where_tecnico} #{where_status}&quot;</span>, <span class="ruby-identifier">tarefas</span>]
  )

  <span class="ruby-identifier">render</span> <span class="ruby-identifier">action</span><span class="ruby-operator">:</span> <span class="ruby-string">&quot;saida_05&quot;</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- executar_05-source -->
          
        </div>

        

        
      </div><!-- executar_05-method -->

    
      <div id="method-i-executar_06" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">executar_06</span><span
            class="method-args">()</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          
          

          
          <div class="method-source-code" id="executar_06-source">
            <pre><span class="ruby-comment"># File app/controllers/relatorios_controller.rb, line 225</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">executar_06</span>
  <span class="ruby-ivar">@servico_nome</span> = <span class="ruby-identifier">nome_do_servico</span> <span class="ruby-identifier">params</span>[<span class="ruby-value">:servico</span>]
  <span class="ruby-ivar">@cliente_nome</span> = <span class="ruby-identifier">nome_do_cliente</span> <span class="ruby-identifier">params</span>[<span class="ruby-value">:cliente</span>]
  <span class="ruby-ivar">@tecnico_nome</span> = <span class="ruby-identifier">nome_do_tecnico</span> <span class="ruby-identifier">params</span>[<span class="ruby-value">:tecnico</span>]
  <span class="ruby-ivar">@data_inicio</span> = <span class="ruby-identifier">filtrar_pelo_date</span> <span class="ruby-value">:inicio</span>
  <span class="ruby-ivar">@data_fim</span> = <span class="ruby-identifier">filtrar_pelo_date</span> <span class="ruby-value">:fim</span>

  <span class="ruby-identifier">where_servico</span> = <span class="ruby-identifier">filtrar_pelo_servico</span> <span class="ruby-identifier">params</span>[<span class="ruby-value">:servico</span>]
  <span class="ruby-identifier">where_cliente</span> = <span class="ruby-identifier">filtrar_pelo_cliente</span> <span class="ruby-identifier">params</span>[<span class="ruby-value">:cliente</span>]
  <span class="ruby-identifier">where_tecnico</span> = <span class="ruby-identifier">filtrar_pelo_tecnico</span> <span class="ruby-identifier">params</span>[<span class="ruby-value">:tecnico</span>]
  <span class="ruby-identifier">where_status</span> = <span class="ruby-identifier">params</span>[<span class="ruby-value">:status</span>] <span class="ruby-operator">==</span> <span class="ruby-string">&quot;&quot;</span> <span class="ruby-operator">?</span> <span class="ruby-string">&quot;&quot;</span> <span class="ruby-operator">:</span> <span class="ruby-node">&quot;AND status = '#{params[:status]}'&quot;</span>

  <span class="ruby-identifier">tarefas</span> = <span class="ruby-constant">Tarefa</span>.<span class="ruby-identifier">all</span>(
    <span class="ruby-identifier">conditions</span><span class="ruby-operator">:</span> [<span class="ruby-node">&quot;emissao between ? and ? #{where_servico} #{where_cliente}&quot;</span>,
      <span class="ruby-ivar">@data_inicio</span>, <span class="ruby-ivar">@data_fim</span>]
  )

  <span class="ruby-ivar">@etapas</span> = <span class="ruby-constant">TarefaEtapa</span>.<span class="ruby-identifier">order</span>(<span class="ruby-string">'tarefa_id, id'</span>).<span class="ruby-identifier">all</span>(
    <span class="ruby-identifier">conditions</span><span class="ruby-operator">:</span> [<span class="ruby-node">&quot;tarefa_id IN (?) #{where_tecnico} #{where_status}&quot;</span>, <span class="ruby-identifier">tarefas</span>]
  )
  
  <span class="ruby-identifier">render</span> <span class="ruby-identifier">action</span><span class="ruby-operator">:</span> <span class="ruby-string">&quot;saida_06&quot;</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- executar_06-source -->
          
        </div>

        

        
      </div><!-- executar_06-method -->

    
      <div id="method-i-gerar" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">gerar</span><span
            class="method-args">()</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          
          

          
          <div class="method-source-code" id="gerar-source">
            <pre><span class="ruby-comment"># File app/controllers/relatorios_controller.rb, line 5</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">gerar</span>
  <span class="ruby-keyword">case</span> <span class="ruby-identifier">params</span>[<span class="ruby-value">:relatorio</span>]
  <span class="ruby-keyword">when</span> <span class="ruby-string">&quot;01&quot;</span>
    <span class="ruby-identifier">redirect_to</span> <span class="ruby-identifier">index_01_path</span>
  <span class="ruby-keyword">when</span> <span class="ruby-string">&quot;02&quot;</span>
    <span class="ruby-identifier">redirect_to</span> <span class="ruby-identifier">index_02_path</span>
  <span class="ruby-keyword">when</span> <span class="ruby-string">&quot;03&quot;</span>
    <span class="ruby-identifier">redirect_to</span> <span class="ruby-identifier">index_03_path</span>
  <span class="ruby-keyword">when</span> <span class="ruby-string">&quot;04&quot;</span>
    <span class="ruby-identifier">redirect_to</span> <span class="ruby-identifier">index_04_path</span>
  <span class="ruby-keyword">when</span> <span class="ruby-string">&quot;05&quot;</span>
    <span class="ruby-identifier">redirect_to</span> <span class="ruby-identifier">index_05_path</span>
  <span class="ruby-keyword">when</span> <span class="ruby-string">&quot;06&quot;</span>
    <span class="ruby-identifier">redirect_to</span> <span class="ruby-identifier">index_06_path</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- gerar-source -->
          
        </div>

        

        
      </div><!-- gerar-method -->

    
    </section><!-- public-instance-method-details -->
  
     <section id="protected-instance-5Buntitled-5D-method-details" class="method-section section">
      <h3 class="section-header">Protected Instance Methods</h3>

    
      <div id="method-i-carregar_recursos" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">carregar_recursos</span><span
            class="method-args">()</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          
          

          
          <div class="method-source-code" id="carregar_recursos-source">
            <pre><span class="ruby-comment"># File app/controllers/relatorios_controller.rb, line 251</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">carregar_recursos</span>
  <span class="ruby-ivar">@clientes</span> = <span class="ruby-constant">Pessoa</span>.<span class="ruby-identifier">all</span>
  <span class="ruby-ivar">@tecnicos</span> = <span class="ruby-constant">Usuario</span>.<span class="ruby-identifier">find_all_by_tipo</span> <span class="ruby-string">&quot;T&quot;</span>
  <span class="ruby-ivar">@tecnicos_gerente</span> = <span class="ruby-constant">Usuario</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">:all</span>, <span class="ruby-identifier">conditions</span><span class="ruby-operator">:</span> <span class="ruby-string">&quot;tipo &lt;&gt; 'A'&quot;</span>)
  <span class="ruby-ivar">@responsaveis</span> = <span class="ruby-constant">Usuario</span>.<span class="ruby-identifier">all</span>
  <span class="ruby-ivar">@servicos</span> = <span class="ruby-constant">Servico</span>.<span class="ruby-identifier">all</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- carregar_recursos-source -->
          
        </div>

        

        
      </div><!-- carregar_recursos-method -->

    
      <div id="method-i-filtrar_pelo_cliente" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">filtrar_pelo_cliente</span><span
            class="method-args">(cliente)</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          
          

          
          <div class="method-source-code" id="filtrar_pelo_cliente-source">
            <pre><span class="ruby-comment"># File app/controllers/relatorios_controller.rb, line 279</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">filtrar_pelo_cliente</span> <span class="ruby-identifier">cliente</span>
  <span class="ruby-identifier">cliente</span> <span class="ruby-operator">==</span> <span class="ruby-string">&quot;&quot;</span> <span class="ruby-operator">?</span> <span class="ruby-string">&quot;&quot;</span> <span class="ruby-operator">:</span> <span class="ruby-node">&quot;AND cliente_id = #{cliente}&quot;</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- filtrar_pelo_cliente-source -->
          
        </div>

        

        
      </div><!-- filtrar_pelo_cliente-method -->

    
      <div id="method-i-filtrar_pelo_date" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">filtrar_pelo_date</span><span
            class="method-args">(data)</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          
          

          
          <div class="method-source-code" id="filtrar_pelo_date-source">
            <pre><span class="ruby-comment"># File app/controllers/relatorios_controller.rb, line 271</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">filtrar_pelo_date</span> <span class="ruby-identifier">data</span>
  (<span class="ruby-node">&quot;#{params[data]['data(1i)']}-#{params[data]['data(2i)']}-#{params[data]['data(3i)']}&quot;</span>).<span class="ruby-identifier">to_date</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- filtrar_pelo_date-source -->
          
        </div>

        

        
      </div><!-- filtrar_pelo_date-method -->

    
      <div id="method-i-filtrar_pelo_servico" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">filtrar_pelo_servico</span><span
            class="method-args">(servico)</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          
          

          
          <div class="method-source-code" id="filtrar_pelo_servico-source">
            <pre><span class="ruby-comment"># File app/controllers/relatorios_controller.rb, line 275</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">filtrar_pelo_servico</span> <span class="ruby-identifier">servico</span>
  <span class="ruby-identifier">servico</span> <span class="ruby-operator">==</span> <span class="ruby-string">&quot;&quot;</span> <span class="ruby-operator">?</span> <span class="ruby-string">&quot;&quot;</span> <span class="ruby-operator">:</span> <span class="ruby-node">&quot;AND servico_id = #{servico}&quot;</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- filtrar_pelo_servico-source -->
          
        </div>

        

        
      </div><!-- filtrar_pelo_servico-method -->

    
      <div id="method-i-filtrar_pelo_tecnico" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">filtrar_pelo_tecnico</span><span
            class="method-args">(tecnico)</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          
          

          
          <div class="method-source-code" id="filtrar_pelo_tecnico-source">
            <pre><span class="ruby-comment"># File app/controllers/relatorios_controller.rb, line 283</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">filtrar_pelo_tecnico</span> <span class="ruby-identifier">tecnico</span>
  <span class="ruby-identifier">tecnico</span> <span class="ruby-operator">==</span> <span class="ruby-string">&quot;&quot;</span> <span class="ruby-operator">?</span> <span class="ruby-string">&quot;&quot;</span> <span class="ruby-operator">:</span> <span class="ruby-node">&quot;AND tecnico_id = #{tecnico}&quot;</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- filtrar_pelo_tecnico-source -->
          
        </div>

        

        
      </div><!-- filtrar_pelo_tecnico-method -->

    
      <div id="method-i-maior_valor" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">maior_valor</span><span
            class="method-args">(valor_maximo, no_periodo, mes_anterior, ano_anterior)</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          
          

          
          <div class="method-source-code" id="maior_valor-source">
            <pre><span class="ruby-comment"># File app/controllers/relatorios_controller.rb, line 350</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">maior_valor</span>(<span class="ruby-identifier">valor_maximo</span>, <span class="ruby-identifier">no_periodo</span>, <span class="ruby-identifier">mes_anterior</span>, <span class="ruby-identifier">ano_anterior</span>)
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">valor_maximo</span> <span class="ruby-operator">&lt;</span> <span class="ruby-identifier">no_periodo</span>
    <span class="ruby-identifier">valor_maximo</span> = <span class="ruby-identifier">no_periodo</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">valor_maximo</span> <span class="ruby-operator">&lt;</span> <span class="ruby-identifier">mes_anterior</span>
    <span class="ruby-identifier">valor_maximo</span> = <span class="ruby-identifier">mes_anterior</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">valor_maximo</span> <span class="ruby-operator">&lt;</span> <span class="ruby-identifier">ano_anterior</span>
    <span class="ruby-identifier">valor_maximo</span> = <span class="ruby-identifier">ano_anterior</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-identifier">valor_maximo</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- maior_valor-source -->
          
        </div>

        

        
      </div><!-- maior_valor-method -->

    
      <div id="method-i-nome_do_cliente" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">nome_do_cliente</span><span
            class="method-args">(cliente)</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          
          

          
          <div class="method-source-code" id="nome_do_cliente-source">
            <pre><span class="ruby-comment"># File app/controllers/relatorios_controller.rb, line 263</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">nome_do_cliente</span> <span class="ruby-identifier">cliente</span>
  <span class="ruby-identifier">cliente</span> <span class="ruby-operator">==</span> <span class="ruby-string">&quot;&quot;</span> <span class="ruby-operator">?</span> <span class="ruby-string">&quot;Todos&quot;</span> <span class="ruby-operator">:</span> <span class="ruby-constant">Pessoa</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">cliente</span>).<span class="ruby-identifier">nome</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- nome_do_cliente-source -->
          
        </div>

        

        
      </div><!-- nome_do_cliente-method -->

    
      <div id="method-i-nome_do_servico" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">nome_do_servico</span><span
            class="method-args">(servico)</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          
          

          
          <div class="method-source-code" id="nome_do_servico-source">
            <pre><span class="ruby-comment"># File app/controllers/relatorios_controller.rb, line 259</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">nome_do_servico</span> <span class="ruby-identifier">servico</span>
  <span class="ruby-identifier">servico</span> <span class="ruby-operator">==</span> <span class="ruby-string">&quot;&quot;</span> <span class="ruby-operator">?</span> <span class="ruby-string">&quot;Todos&quot;</span> <span class="ruby-operator">:</span> <span class="ruby-constant">Servico</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">servico</span>).<span class="ruby-identifier">nome</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- nome_do_servico-source -->
          
        </div>

        

        
      </div><!-- nome_do_servico-method -->

    
      <div id="method-i-nome_do_tecnico" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">nome_do_tecnico</span><span
            class="method-args">(tecnico)</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          
          

          
          <div class="method-source-code" id="nome_do_tecnico-source">
            <pre><span class="ruby-comment"># File app/controllers/relatorios_controller.rb, line 267</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">nome_do_tecnico</span> <span class="ruby-identifier">tecnico</span>
  <span class="ruby-identifier">tecnico</span> <span class="ruby-operator">==</span> <span class="ruby-string">&quot;&quot;</span> <span class="ruby-operator">?</span> <span class="ruby-string">&quot;Todos&quot;</span> <span class="ruby-operator">:</span> <span class="ruby-constant">Usuario</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">tecnico</span>).<span class="ruby-identifier">nome_completo</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- nome_do_tecnico-source -->
          
        </div>

        

        
      </div><!-- nome_do_tecnico-method -->

    
      <div id="method-i-numero_de_etapas_num_periodo_por_tecnico" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">numero_de_etapas_num_periodo_por_tecnico</span><span
            class="method-args">(tecnico_id, where_cliente, where_servico, data_inicio, data_fim)</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          
          

          
          <div class="method-source-code" id="numero_de_etapas_num_periodo_por_tecnico-source">
            <pre><span class="ruby-comment"># File app/controllers/relatorios_controller.rb, line 287</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">numero_de_etapas_num_periodo_por_tecnico</span> <span class="ruby-identifier">tecnico_id</span>, <span class="ruby-identifier">where_cliente</span>, <span class="ruby-identifier">where_servico</span>, <span class="ruby-identifier">data_inicio</span>, <span class="ruby-identifier">data_fim</span>
  <span class="ruby-identifier">tarefas</span> = <span class="ruby-constant">Tarefa</span>.<span class="ruby-identifier">all</span>(
    <span class="ruby-identifier">conditions</span><span class="ruby-operator">:</span> [<span class="ruby-node">&quot;emissao between ? and ? #{where_servico} #{where_cliente}&quot;</span>,
      <span class="ruby-identifier">data_inicio</span>, <span class="ruby-identifier">data_fim</span>]
  )

  <span class="ruby-constant">TarefaEtapa</span>.<span class="ruby-identifier">count</span>(<span class="ruby-identifier">conditions</span><span class="ruby-operator">:</span> [<span class="ruby-node">&quot;tarefa_id IN (?) AND tecnico_id = #{tecnico_id}&quot;</span>, <span class="ruby-identifier">tarefas</span>])
<span class="ruby-keyword">end</span></pre>
          </div><!-- numero_de_etapas_num_periodo_por_tecnico-source -->
          
        </div>

        

        
      </div><!-- numero_de_etapas_num_periodo_por_tecnico-method -->

    
      <div id="method-i-numero_de_tarefas_num_periodo_por_cliente" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">numero_de_tarefas_num_periodo_por_cliente</span><span
            class="method-args">(cliente_id, where_tecnico, where_servico, data_inicio, data_fim)</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          
          

          
          <div class="method-source-code" id="numero_de_tarefas_num_periodo_por_cliente-source">
            <pre><span class="ruby-comment"># File app/controllers/relatorios_controller.rb, line 303</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">numero_de_tarefas_num_periodo_por_cliente</span> <span class="ruby-identifier">cliente_id</span>, <span class="ruby-identifier">where_tecnico</span>, <span class="ruby-identifier">where_servico</span>, <span class="ruby-identifier">data_inicio</span>, <span class="ruby-identifier">data_fim</span>
  <span class="ruby-constant">Tarefa</span>.<span class="ruby-identifier">count</span>(
    <span class="ruby-identifier">conditions</span><span class="ruby-operator">:</span> [<span class="ruby-node">&quot;emissao between ? and ? AND cliente_id = #{cliente_id} #{where_servico} #{where_tecnico}&quot;</span>,
      <span class="ruby-identifier">data_inicio</span>, <span class="ruby-identifier">data_fim</span>]
  )
<span class="ruby-keyword">end</span></pre>
          </div><!-- numero_de_tarefas_num_periodo_por_cliente-source -->
          
        </div>

        

        
      </div><!-- numero_de_tarefas_num_periodo_por_cliente-method -->

    
      <div id="method-i-numero_de_tarefas_num_periodo_por_servico" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">numero_de_tarefas_num_periodo_por_servico</span><span
            class="method-args">(servico_id, where_cliente, where_tecnico, data_inicio, data_fim)</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          
          

          
          <div class="method-source-code" id="numero_de_tarefas_num_periodo_por_servico-source">
            <pre><span class="ruby-comment"># File app/controllers/relatorios_controller.rb, line 296</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">numero_de_tarefas_num_periodo_por_servico</span> <span class="ruby-identifier">servico_id</span>, <span class="ruby-identifier">where_cliente</span>, <span class="ruby-identifier">where_tecnico</span>, <span class="ruby-identifier">data_inicio</span>, <span class="ruby-identifier">data_fim</span>
  <span class="ruby-constant">Tarefa</span>.<span class="ruby-identifier">count</span>(
    <span class="ruby-identifier">conditions</span><span class="ruby-operator">:</span> [<span class="ruby-node">&quot;emissao between ? and ? AND servico_id = #{servico_id} #{where_tecnico} #{where_cliente}&quot;</span>,
      <span class="ruby-identifier">data_inicio</span>, <span class="ruby-identifier">data_fim</span>]
  )
<span class="ruby-keyword">end</span></pre>
          </div><!-- numero_de_tarefas_num_periodo_por_servico-source -->
          
        </div>

        

        
      </div><!-- numero_de_tarefas_num_periodo_por_servico-method -->

    
      <div id="method-i-relatorio_grafico_bar" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">relatorio_grafico_bar</span><span
            class="method-args">(dados, legenda, valor_maximo)</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          
          

          
          <div class="method-source-code" id="relatorio_grafico_bar-source">
            <pre><span class="ruby-comment"># File app/controllers/relatorios_controller.rb, line 319</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">relatorio_grafico_bar</span> <span class="ruby-identifier">dados</span>, <span class="ruby-identifier">legenda</span>, <span class="ruby-identifier">valor_maximo</span>
  <span class="ruby-constant">Gchart</span>.<span class="ruby-identifier">bar</span>(
    <span class="ruby-identifier">data</span><span class="ruby-operator">:</span> <span class="ruby-identifier">dados</span>,
    <span class="ruby-identifier">legend</span><span class="ruby-operator">:</span> <span class="ruby-identifier">legenda</span>,
    <span class="ruby-identifier">max_value</span><span class="ruby-operator">:</span> <span class="ruby-identifier">valor_maximo</span>,
    <span class="ruby-identifier">theme</span><span class="ruby-operator">:</span> <span class="ruby-value">:thirty7signals</span>,
    <span class="ruby-identifier">bg</span><span class="ruby-operator">:</span> {<span class="ruby-identifier">color</span><span class="ruby-operator">:</span> <span class="ruby-string">'efefef'</span>, <span class="ruby-identifier">type</span><span class="ruby-operator">:</span> <span class="ruby-string">'gradient'</span>, <span class="ruby-identifier">angle</span><span class="ruby-operator">:</span> <span class="ruby-value">90</span>},
    <span class="ruby-identifier">width</span><span class="ruby-operator">:</span> <span class="ruby-value">900</span>,
    <span class="ruby-identifier">heigh</span><span class="ruby-operator">:</span> <span class="ruby-value">750</span>,
    <span class="ruby-identifier">stacked</span><span class="ruby-operator">:</span> <span class="ruby-keyword">false</span>,
    <span class="ruby-identifier">bar_width_and_spacing</span><span class="ruby-operator">:</span> {<span class="ruby-identifier">width</span><span class="ruby-operator">:</span> <span class="ruby-value">19</span>, <span class="ruby-identifier">group_spacing</span><span class="ruby-operator">:</span> <span class="ruby-value">40</span>},
    <span class="ruby-identifier">labels</span><span class="ruby-operator">:</span> [<span class="ruby-string">'No período'</span>, <span class="ruby-string">'Há um mês'</span>, <span class="ruby-string">&quot;Há um ano&quot;</span>],
    <span class="ruby-identifier">encoding</span><span class="ruby-operator">:</span> <span class="ruby-string">'extended'</span>,
    <span class="ruby-identifier">axis_with_labels</span><span class="ruby-operator">:</span> [<span class="ruby-string">'y'</span>],
    <span class="ruby-identifier">axis_range</span><span class="ruby-operator">:</span> [[<span class="ruby-value">0</span>, <span class="ruby-identifier">valor_maximo</span>]]
  )
<span class="ruby-keyword">end</span></pre>
          </div><!-- relatorio_grafico_bar-source -->
          
        </div>

        

        
      </div><!-- relatorio_grafico_bar-method -->

    
      <div id="method-i-relatorio_grafico_pie" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">relatorio_grafico_pie</span><span
            class="method-args">(dados, legenda, titulo)</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          
          

          
          <div class="method-source-code" id="relatorio_grafico_pie-source">
            <pre><span class="ruby-comment"># File app/controllers/relatorios_controller.rb, line 337</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">relatorio_grafico_pie</span> <span class="ruby-identifier">dados</span>, <span class="ruby-identifier">legenda</span>, <span class="ruby-identifier">titulo</span>
  <span class="ruby-constant">Gchart</span>.<span class="ruby-identifier">pie_3d</span>(
      <span class="ruby-identifier">title</span><span class="ruby-operator">:</span> <span class="ruby-identifier">titulo</span>,
      <span class="ruby-identifier">legend</span><span class="ruby-operator">:</span> <span class="ruby-identifier">legenda</span>,
      <span class="ruby-identifier">bg</span><span class="ruby-operator">:</span> {<span class="ruby-identifier">color</span><span class="ruby-operator">:</span> <span class="ruby-string">'efefef'</span>, <span class="ruby-identifier">type</span><span class="ruby-operator">:</span> <span class="ruby-string">'gradient'</span>, <span class="ruby-identifier">angle</span><span class="ruby-operator">:</span> <span class="ruby-value">90</span>},
      <span class="ruby-identifier">theme</span><span class="ruby-operator">:</span> <span class="ruby-value">:thirty7signals</span>,
      <span class="ruby-identifier">labels</span><span class="ruby-operator">:</span> <span class="ruby-identifier">dados</span>,
      <span class="ruby-identifier">data</span><span class="ruby-operator">:</span> <span class="ruby-identifier">dados</span>,
      <span class="ruby-identifier">size</span><span class="ruby-operator">:</span> <span class="ruby-string">'900x200'</span>
    ) <span class="ruby-keyword">if</span> <span class="ruby-identifier">dados</span>.<span class="ruby-identifier">present?</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- relatorio_grafico_pie-source -->
          
        </div>

        

        
      </div><!-- relatorio_grafico_pie-method -->

    
      <div id="method-i-remover_acentos" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">remover_acentos</span><span
            class="method-args">(texto)</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          
          

          
          <div class="method-source-code" id="remover_acentos-source">
            <pre><span class="ruby-comment"># File app/controllers/relatorios_controller.rb, line 310</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">remover_acentos</span> <span class="ruby-identifier">texto</span>
  <span class="ruby-keyword">return</span> <span class="ruby-identifier">texto</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">texto</span>.<span class="ruby-identifier">blank?</span>
  <span class="ruby-identifier">texto</span> = <span class="ruby-identifier">texto</span>.<span class="ruby-identifier">gsub</span>(<span class="ruby-regexp">%r[á|à|ã|â|ä]/</span>, <span class="ruby-string">'a'</span>).<span class="ruby-identifier">gsub</span>(<span class="ruby-regexp">%r(é|è|ê|ë)/</span>, <span class="ruby-string">'e'</span>).<span class="ruby-identifier">gsub</span>(<span class="ruby-regexp">%r(í|ì|î|ï)/</span>, <span class="ruby-string">'i'</span>).<span class="ruby-identifier">gsub</span>(<span class="ruby-regexp">%r(ó|ò|õ|ô|ö)/</span>, <span class="ruby-string">'o'</span>).<span class="ruby-identifier">gsub</span>(<span class="ruby-regexp">%r(ú|ù|û|ü)/</span>, <span class="ruby-string">'u'</span>)
  <span class="ruby-identifier">texto</span> = <span class="ruby-identifier">texto</span>.<span class="ruby-identifier">gsub</span>(<span class="ruby-regexp">%r(Á|À|Ã|Â|Ä)/</span>, <span class="ruby-string">'A'</span>).<span class="ruby-identifier">gsub</span>(<span class="ruby-regexp">%r(É|È|Ê|Ë)/</span>, <span class="ruby-string">'E'</span>).<span class="ruby-identifier">gsub</span>(<span class="ruby-regexp">%r(Í|Ì|Î|Ï)/</span>, <span class="ruby-string">'I'</span>).<span class="ruby-identifier">gsub</span>(<span class="ruby-regexp">%r(Ó|Ò|Õ|Ô|Ö)/</span>, <span class="ruby-string">'O'</span>).<span class="ruby-identifier">gsub</span>(<span class="ruby-regexp">%r(Ú|Ù|Û|Ü)/</span>, <span class="ruby-string">'U'</span>)
  <span class="ruby-identifier">texto</span> = <span class="ruby-identifier">texto</span>.<span class="ruby-identifier">gsub</span>(<span class="ruby-regexp">%rñ/</span>, <span class="ruby-string">'n'</span>).<span class="ruby-identifier">gsub</span>(<span class="ruby-regexp">%rÑ/</span>, <span class="ruby-string">'N'</span>)
  <span class="ruby-identifier">texto</span> = <span class="ruby-identifier">texto</span>.<span class="ruby-identifier">gsub</span>(<span class="ruby-regexp">%rç/</span>, <span class="ruby-string">'c'</span>).<span class="ruby-identifier">gsub</span>(<span class="ruby-regexp">%rÇ/</span>, <span class="ruby-string">'C'</span>)
  <span class="ruby-identifier">texto</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- remover_acentos-source -->
          
        </div>

        

        
      </div><!-- remover_acentos-method -->

    
      <div id="method-i-todos_os_tecnicos" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">todos_os_tecnicos</span><span
            class="method-args">()</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          
          

          
          <div class="method-source-code" id="todos_os_tecnicos-source">
            <pre><span class="ruby-comment"># File app/controllers/relatorios_controller.rb, line 363</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">todos_os_tecnicos</span>
  <span class="ruby-identifier">tecnicos</span> = <span class="ruby-string">&quot;&quot;</span>
  <span class="ruby-constant">Usuario</span>.<span class="ruby-identifier">all</span>(<span class="ruby-identifier">select</span><span class="ruby-operator">:</span> <span class="ruby-string">&quot;id&quot;</span>, <span class="ruby-identifier">conditions</span><span class="ruby-operator">:</span> <span class="ruby-string">&quot;tipo &lt;&gt; 'A'&quot;</span>).<span class="ruby-identifier">collect</span>{ <span class="ruby-operator">|</span><span class="ruby-identifier">t</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">tecnicos</span> <span class="ruby-operator">+=</span> <span class="ruby-identifier">tecnicos</span> <span class="ruby-operator">==</span> <span class="ruby-string">&quot;&quot;</span> <span class="ruby-operator">?</span> <span class="ruby-identifier">t</span>.<span class="ruby-identifier">id</span>.<span class="ruby-identifier">to_s</span> <span class="ruby-operator">:</span> <span class="ruby-node">&quot;, #{t.id.to_s}&quot;</span>
  }
  <span class="ruby-identifier">tecnicos</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- todos_os_tecnicos-source -->
          
        </div>

        

        
      </div><!-- todos_os_tecnicos-method -->

    
    </section><!-- protected-instance-method-details -->
  
  </section><!-- 5Buntitled-5D -->

</div><!-- documentation -->


<footer id="validator-badges">
  <p><a href="http://validator.w3.org/check/referer">[Validate]</a>
  <p>Generated by <a href="https://github.com/rdoc/rdoc">RDoc</a> 3.12.
  <p>Generated with the <a href="http://deveiate.org/projects/Darkfish-Rdoc/">Darkfish Rdoc Generator</a> 3.
</footer>

